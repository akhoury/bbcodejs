(function(){var n,i,k,m,e,a,b=Array.prototype.slice;e=/[&<>"]/g;m={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};a=/\b((?:([\w-]+):(\/{1,3})|www[.])(?:(?:(?:[^\s&()]|&amp;|&quot;)*(?:[^!"#$%&'()*+,.:;<=>?@\[\]^`{|}~\s]))|(?:\((?:[^\s&()]|&amp;|&quot;)*\)))+)/g;i={"--":"&ndash;","---":"&mdash;","...":"&#8230;","(c)":"&copy;","(reg)":"&reg;","(tm)":"&trade;"};k=RegExp(function(){var a;a=[];for(n in i)a.push(n.replace(/(\.|\)|\()/g,"\\$1"));return a}().join("|"));window.Renderer=function(){function c(){this._contexts=
[];this.options={linkify:!0}}c.prototype.context=function(a,c){var b,d,h,e;d={};e=this.options;for(b in e)h=e[b],d[b]=h;for(b in a)h=a[b],d[b]=h;this._contexts.push(this.options);this.options=d;h=c();this.options=this._contexts.pop();return h};c.prototype.escape=function(a){return a.replace(e,function(a){return m[a]})};c.prototype.linkify=function(c){return c.replace(a,function(){var a,c,d;a=1<=arguments.length?b.call(arguments,0):[];d=a[1];if((c=a[2])&&c!=="http"&&c!=="https")return d;a=a[1];c||
(a="http://"+a);return'<a href="'+a+'" target="_blank">'+d+"</a>"})};c.prototype.strip=function(a){return a.replace(/^\s+|\s+$/g,"")};c.prototype.cosmetic_replace=function(a){return a.replace(k,function(){var a;a=(1<=arguments.length?b.call(arguments,0):[])[0];return i[a]||a})};c.prototype.html_attributes=function(a){var c,b;return!a?"":function(){var d;d=[];for(c in a)b=a[c],d.push(""+c+'="'+b+'"');return d}().join(" ")};return c}()}).call(this);
(function(){var n,i,k,m,e,a,b,c,p,o,g,d,h,q=Array.prototype.indexOf||function(a){for(var j=0,c=this.length;j<c;j++)if(this[j]===a)return j;return-1},r=Object.prototype.hasOwnProperty,l=function(a,j){function c(){this.constructor=a}for(var b in j)r.call(j,b)&&(a[b]=j[b]);c.prototype=j.prototype;a.prototype=new c;a.__super__=j.prototype;return a},s=function(a,j){return function(){return a.apply(j,arguments)}};h=/\r?\n/g;window.Tag=function(){function a(j,f){var c,b,d,e,g,h;this.renderer=j;f==null&&
(f={});this.CLOSED_BY=[];this.DISCARD_TEXT=this.STRIP_OUTER=this.STRIP_INNER=this.SELF_CLOSE=!1;this.name=f.name||null;this.parent=f.parent||null;this.text=f.text||"";this.parent&&this.parent.children.push(this);f.params==null&&(f.params=[]);this.params={};g=f.params;for(d=0,e=g.length;d<e;d++)h=g[d],c=h[0],b=h[1],b&&(this.params[c]=b);this.children=[]}a.prototype.get_content=function(a){var f,c,b,d,e;a==null&&(a=!1);b=[];this.text&&(f=this.renderer.escape(this.text),a||(this.renderer.options.linkify&&
(f=this.renderer.linkify(f)),f=this.renderer.cosmetic_replace(f.replace(h,"<br />"))),b.push(f));c=this.children;for(d=0,e=c.length;d<e;d++)f=c[d],a?b.push(f.to_text()):this.DISCARD_TEXT&&f.name===null||b.push(f.to_html());b=b.join("");if(!a&&this.STRIP_INNER){for(b=this.renderer.strip(b);b.slice(0,6)==="<br />";)b=b.slice(6);for(;b.slice(-6)==="<br />";)b=b.slice(0,-6);b=this.renderer.strip(b)}return b};a.prototype.to_text=function(a){var f,b,c,d,e;a==null&&(a=!1);c=[];this.name!==null&&(this.params.length?
(b=function(){var a,b;a=this.params;b=[];for(f in a)d=a[f],b.push([f,d].join("="));return b}.call(this).join(" "),this.name in this.params?c.push("["+b+"]"):c.push("["+this.name+" "+b+"]")):c.push("["+this.name+"]"));c.push(this.get_content(!a));this.name!==null&&(e=this.name,q.call(this.CLOSED_BY,e)<0)&&c.push("[/"+this.name+"]");return c.join("")};a.prototype._to_html=function(){return[this.to_text(!0)]};a.prototype.to_html=function(){return this._to_html().join("")};return a}();i=function(){function a(){a.__super__.constructor.apply(this,
arguments);this.STRIP_INNER=!0;this._inline=this.params.code==="inline";if(!this._inline)this.STRIP_OUTER=!0}l(a,Tag);a.prototype._to_html=function(){var a;return this._inline?["<code>",this.get_content(!0),"</code>"]:(a=this.params.lang||this.params[this.name])?['<pre class="prettyprint lang-'+a+'">',this.get_content(!0),"</pre>"]:["<pre>",this.get_content(!0),"</pre>"]};return a}();e=function(){function a(){a.__super__.constructor.apply(this,arguments)}l(a,Tag);a.prototype._to_html=function(){var a;
a={src:this.renderer.strip(this.get_content(!0))};"width"in this.params&&(a.width=this.params.width);"height"in this.params&&(a.height=this.params.height);return["<img "+this.renderer.html_attributes(a)+" />"]};return a}();g=function(){function a(){a.__super__.constructor.apply(this,arguments)}l(a,Tag);a.prototype._to_html=function(){var a;a=this.params.size;return isNaN(a)?this.get_content():['<span style="font-size:'+a+'px">',this.get_content(),"</span>"]};return a}();k=function(){function a(){a.__super__.constructor.apply(this,
arguments)}l(a,Tag);a.prototype._to_html=function(){var a;a=this.params.color;return!a?this.get_content():['<span style="color:'+a+'">',this.get_content(),"</span>"]};return a}();n=function(){function a(){a.__super__.constructor.apply(this,arguments)}l(a,Tag);a.prototype._to_html=function(){return['<div style="text-align:center;">',this.get_content(),"</div>"]};return a}();o=function(){function a(){a.__super__.constructor.apply(this,arguments)}l(a,Tag);a.prototype._to_html=function(){return['<div style="float:right;">',
this.get_content(),"</div>"]};return a}();m=function(){function a(){a.__super__.constructor.apply(this,arguments);this.STRIP_OUTER=this.SELF_CLOSE=!0}l(a,Tag);a.prototype._to_html=function(){return["<hr />"]};return a}();c=function(){function a(){a.__super__.constructor.apply(this,arguments);this.STRIP_OUTER=this.STRIP_INNER=!0}l(a,Tag);a.prototype._to_html=function(){var a;a=this.params.list;return a==="1"?["<ol>",this.get_content(),"</ol>"]:a==="a"?['<ol style="list-style-type:lower-alpha;">',this.get_content(),
"</ol>"]:a==="A"?['<ol style="list-style-type:upper-alpha;">',this.get_content(),"</ol>"]:["<ul>",this.get_content(),"</ul>"]};return a}();b=function(){function a(){a.__super__.constructor.apply(this,arguments);this.CLOSED_BY=["*","/list"];this.STRIP_INNER=!0}l(a,Tag);a.prototype._to_html=function(){return["<li>",this.get_content(),"</li>"]};return a}();p=function(){function a(){a.__super__.constructor.apply(this,arguments);this.STRIP_OUTER=this.STRIP_INNER=!0}l(a,Tag);a.prototype._to_html=function(){var a,
b;b=["<blockquote>",this.get_content()];if(a=this.params.quote)b.push("<small>"),b.push(a),b.push("</small>");b.push("</blockquote>");return b};return a}();a=function(){function a(){a.__super__.constructor.apply(this,arguments)}l(a,Tag);a.prototype._to_html=function(){var a;a=this.renderer.strip(this.params[this.name]||this.get_content(!0));/javascript:/i.test(a)?a="":/:/.test(a)||(a="http://"+a);return a?this.renderer.context({linkify:!1},s(function(){return['<a href="'+a+'" target="_blank">',this.get_content(),
"</a>"]},this)):[this.get_content()]};return a}();d=function(a,b){return function(){function c(){var a,d;c.__super__.constructor.apply(this,arguments);for(a in b)d=b[a],this[a]=d}l(c,Tag);c.prototype._to_html=function(){var b;(b=this.renderer.html_attributes(this.params))&&(b=" "+b);return["<"+a+b+">",this.get_content(),"</"+a+">"]};return c}()};window.BUILTIN_TAGS={b:d("strong"),i:d("em"),u:d("u"),s:d("strike"),h1:d("h1",{STRIP_OUTER:!0}),h2:d("h2",{STRIP_OUTER:!0}),h3:d("h3",{STRIP_OUTER:!0}),h4:d("h4",
{STRIP_OUTER:!0}),h5:d("h5",{STRIP_OUTER:!0}),h6:d("h6",{STRIP_OUTER:!0}),pre:d("pre"),table:d("table",{DISCARD_TEXT:!0}),thead:d("thead",{DISCARD_TEXT:!0}),tbody:d("tbody",{DISCARD_TEXT:!0}),tr:d("tr",{DISCARD_TEXT:!0}),th:d("th"),td:d("td"),code:i,img:e,hr:m,size:g,center:n,right:o,color:k,list:c,"*":b,quote:p,url:a,link:a}}).call(this);
(function(){var n,i,k,m=Array.prototype.indexOf||function(e){for(var a=0,b=this.length;a<b;a++)if(this[a]===e)return a;return-1};n=/^\s*$/;k=/(\[\/?.+?\])/;i=/^\r?\n/;window.Parser=function(){function e(a){var b,c,e;a==null&&(a=null);if(a){this.tags={};for(c=0,e=a.length;c<e;c++)b=a[c],m.call(BUILTIN_TAGS,b)>=0&&(this.tags[b]=BUILTIN_TAGS[b])}else this.tags=BUILTIN_TAGS;this.renderer=new Renderer}e.prototype.register_tag=function(a,b){return this.tags[a]=b};e.prototype._parse_params=function(a){var b,
c,e,o,g,d,h,i,k;e=[];if(a){g=c=[];h=[];d=" ";o=!1;for(i=0,k=a.length;i<k;i++)b=a[i],o?o=!1:g===c&&b==="="?g=h:!h.length&&b==='"'?d=b:b!==d?g.push(b):(e.push([c.join("").toLowerCase(),h.join("")]),n.test(d)||(o=!0),g=c=[],h=[],d=" ");e.push([c.join("").toLowerCase(),h.join("")])}return e};e.prototype._create_text_node=function(a,b){a.children.length&&a.children.slice(-1)[0].STRIP_OUTER&&(b=b.replace(i,""));return new Tag(this.renderer,{text:b,parent:a})};e.prototype.parse=function(a){var b,c,e,i,g,
d;c=i=new Tag(this.renderer);for(d=a.split(k);d.length;)if(g=d.shift(),g.match(k))if(e=this._parse_params(g.slice(1,-1)),a=e[0][0],m.call(c.CLOSED_BY,a)>=0&&(d.unshift(g),a="/"+c.name,e=[]),a[0]==="/")if(a=a.slice(1),a in this.tags){if(c.name===a)c=c.parent}else this._create_text_node(c,g);else if(b=this.tags[a]){if(b=new b(this.renderer,{name:a,parent:c,params:e}),!b.SELF_CLOSE&&(m.call(b.CLOSED_BY,a)<0||c.name!==a))c=b}else this._create_text_node(c,g);else this._create_text_node(c,g);return i};
e.prototype.to_html=function(a){return this.parse(a).to_html()};return e}()}).call(this);
(function(){var n,h,k,m,e,a,d=Array.prototype.slice;e=/[&<>"]/g;m={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};a=/\b((?:([\w-]+):(\/{1,3})|www[.])(?:(?:(?:[^\s&()]|&amp;|&quot;)*(?:[^!"#$%&'()*+,.:;<=>?@\[\]^`{|}~\s]))|(?:\((?:[^\s&()]|&amp;|&quot;)*\)))+)/g;h={"--":"&ndash;","---":"&mdash;","...":"&#8230;","(c)":"&copy;","(reg)":"&reg;","(tm)":"&trade;"};k=RegExp(function(){var a;a=[];for(n in h)a.push(n.replace(/(\.|\)|\()/g,"\\$1"));return a}().join("|"));window.BBCodeRenderer=function(){function b(){this._contexts=
[];this.options={linkify:!0}}b.prototype.context=function(a,d){var b,c,g,e;c={};e=this.options;for(b in e)g=e[b],c[b]=g;for(b in a)g=a[b],c[b]=g;this._contexts.push(this.options);this.options=c;g=d();this.options=this._contexts.pop();return g};b.prototype.escape=function(a){return a.replace(e,function(a){return m[a]})};b.prototype.linkify=function(b){return b.replace(a,function(){var a,b,c;a=1<=arguments.length?d.call(arguments,0):[];c=a[1];if((b=a[2])&&b!=="http"&&b!=="https")return c;a=a[1];b||
(a="http://"+a);return'<a href="'+a+'" target="_blank">'+c+"</a>"})};b.prototype.strip=function(a){return a.replace(/^\s+|\s+$/g,"")};b.prototype.cosmetic_replace=function(a){return a.replace(k,function(){var a;a=(1<=arguments.length?d.call(arguments,0):[])[0];return h[a]||a})};b.prototype.html_attributes=function(a){var b,d;return!a?"":function(){var c;c=[];for(b in a)d=a[b],c.push(""+b+'="'+d+'"');return c}().join(" ")};return b}()}).call(this);
(function(){var n,h,k,m,e,a,d,b,p,o,f,c,g,q=Array.prototype.indexOf||function(a){for(var j=0,b=this.length;j<b;j++)if(this[j]===a)return j;return-1},r=Object.prototype.hasOwnProperty,l=function(a,j){function b(){this.constructor=a}for(var c in j)r.call(j,c)&&(a[c]=j[c]);b.prototype=j.prototype;a.prototype=new b;a.__super__=j.prototype;return a},s=function(a,j){return function(){return a.apply(j,arguments)}};g=/\r?\n/g;window.BBCodeTag=function(){function a(j,b){var i,c,d,e,f,g;this.renderer=j;b==
null&&(b={});this.CLOSED_BY=[];this.DISCARD_TEXT=this.STRIP_OUTER=this.STRIP_INNER=this.SELF_CLOSE=!1;this.name=b.name||null;this.parent=b.parent||null;this.text=b.text||"";this.parent&&this.parent.children.push(this);b.params==null&&(b.params=[]);this.params={};f=b.params;for(d=0,e=f.length;d<e;d++)g=f[d],i=g[0],c=g[1],c&&(this.params[i]=c);this.children=[]}a.prototype.get_content=function(a){var b,i,c,d,e;a==null&&(a=!1);c=[];this.text&&(b=this.renderer.escape(this.text),a||(this.renderer.options.linkify&&
(b=this.renderer.linkify(b)),b=this.renderer.cosmetic_replace(b.replace(g,"<br />"))),c.push(b));i=this.children;for(d=0,e=i.length;d<e;d++)b=i[d],a?c.push(b.to_text()):this.DISCARD_TEXT&&b.name===null||c.push(b.to_html());c=c.join("");if(!a&&this.STRIP_INNER){for(c=this.renderer.strip(c);c.slice(0,6)==="<br />";)c=c.slice(6);for(;c.slice(-6)==="<br />";)c=c.slice(0,-6);c=this.renderer.strip(c)}return c};a.prototype.to_text=function(a){var b,c,i,d,e;a==null&&(a=!1);i=[];this.name!==null&&(this.params.length?
(c=function(){var a,c;a=this.params;c=[];for(b in a)d=a[b],c.push([b,d].join("="));return c}.call(this).join(" "),this.name in this.params?i.push("["+c+"]"):i.push("["+this.name+" "+c+"]")):i.push("["+this.name+"]"));i.push(this.get_content(!a));this.name!==null&&(e=this.name,q.call(this.CLOSED_BY,e)<0)&&i.push("[/"+this.name+"]");return i.join("")};a.prototype._to_html=function(){return[this.to_text(!0)]};a.prototype.to_html=function(){return this._to_html().join("")};return a}();h=function(){function a(){a.__super__.constructor.apply(this,
arguments);this.STRIP_INNER=!0;this._inline=this.params.code==="inline";if(!this._inline)this.STRIP_OUTER=!0}l(a,BBCodeTag);a.prototype._to_html=function(){var a;return this._inline?["<code>",this.get_content(!0),"</code>"]:(a=this.params.lang||this.params[this.name])?['<pre class="prettyprint lang-'+a+'">',this.get_content(!0),"</pre>"]:["<pre>",this.get_content(!0),"</pre>"]};return a}();e=function(){function a(){a.__super__.constructor.apply(this,arguments)}l(a,BBCodeTag);a.prototype._to_html=
function(){var a;a={src:this.renderer.strip(this.get_content(!0))};"width"in this.params&&(a.width=this.params.width);"height"in this.params&&(a.height=this.params.height);return["<img "+this.renderer.html_attributes(a)+" />"]};return a}();f=function(){function a(){a.__super__.constructor.apply(this,arguments)}l(a,BBCodeTag);a.prototype._to_html=function(){var a;a=this.params.size;return isNaN(a)?this.get_content():['<span style="font-size:'+a+'px">',this.get_content(),"</span>"]};return a}();k=function(){function a(){a.__super__.constructor.apply(this,
arguments)}l(a,BBCodeTag);a.prototype._to_html=function(){var a;a=this.params.color;return!a?this.get_content():['<span style="color:'+a+'">',this.get_content(),"</span>"]};return a}();n=function(){function a(){a.__super__.constructor.apply(this,arguments)}l(a,BBCodeTag);a.prototype._to_html=function(){return['<div style="text-align:center;">',this.get_content(),"</div>"]};return a}();o=function(){function a(){a.__super__.constructor.apply(this,arguments)}l(a,BBCodeTag);a.prototype._to_html=function(){return['<div style="float:right;">',
this.get_content(),"</div>"]};return a}();m=function(){function a(){a.__super__.constructor.apply(this,arguments);this.STRIP_OUTER=this.SELF_CLOSE=!0}l(a,BBCodeTag);a.prototype._to_html=function(){return["<hr />"]};return a}();d=function(){function a(){a.__super__.constructor.apply(this,arguments);this.STRIP_OUTER=this.STRIP_INNER=!0}l(a,BBCodeTag);a.prototype._to_html=function(){var a;a=this.params.list;return a==="1"?["<ol>",this.get_content(),"</ol>"]:a==="a"?['<ol style="list-style-type:lower-alpha;">',
this.get_content(),"</ol>"]:a==="A"?['<ol style="list-style-type:upper-alpha;">',this.get_content(),"</ol>"]:["<ul>",this.get_content(),"</ul>"]};return a}();b=function(){function a(){a.__super__.constructor.apply(this,arguments);this.CLOSED_BY=["*","/list"];this.STRIP_INNER=!0}l(a,BBCodeTag);a.prototype._to_html=function(){return["<li>",this.get_content(),"</li>"]};return a}();p=function(){function a(){a.__super__.constructor.apply(this,arguments);this.STRIP_OUTER=this.STRIP_INNER=!0}l(a,BBCodeTag);
a.prototype._to_html=function(){var a,b;b=["<blockquote>",this.get_content()];if(a=this.params.quote)b.push("<small>"),b.push(a),b.push("</small>");b.push("</blockquote>");return b};return a}();a=function(){function a(){a.__super__.constructor.apply(this,arguments)}l(a,BBCodeTag);a.prototype._to_html=function(){var a;a=this.renderer.strip(this.params[this.name]||this.get_content(!0));/javascript:/i.test(a)?a="":/:/.test(a)||(a="http://"+a);return a?this.renderer.context({linkify:!1},s(function(){return['<a href="'+
a+'" target="_blank">',this.get_content(),"</a>"]},this)):[this.get_content()]};return a}();c=function(a,b){return function(){function c(){var a,d;c.__super__.constructor.apply(this,arguments);for(a in b)d=b[a],this[a]=d}l(c,BBCodeTag);c.prototype._to_html=function(){var b;(b=this.renderer.html_attributes(this.params))&&(b=" "+b);return["<"+a+b+">",this.get_content(),"</"+a+">"]};return c}()};window.BBCODE_TAGS={b:c("strong"),i:c("em"),u:c("u"),s:c("strike"),h1:c("h1",{STRIP_OUTER:!0}),h2:c("h2",
{STRIP_OUTER:!0}),h3:c("h3",{STRIP_OUTER:!0}),h4:c("h4",{STRIP_OUTER:!0}),h5:c("h5",{STRIP_OUTER:!0}),h6:c("h6",{STRIP_OUTER:!0}),pre:c("pre"),table:c("table",{DISCARD_TEXT:!0}),thead:c("thead",{DISCARD_TEXT:!0}),tbody:c("tbody",{DISCARD_TEXT:!0}),tr:c("tr",{DISCARD_TEXT:!0}),th:c("th"),td:c("td"),code:h,img:e,hr:m,size:f,center:n,right:o,color:k,list:d,"*":b,quote:p,url:a,link:a}}).call(this);
(function(){var n,h,k,m=Array.prototype.indexOf||function(e){for(var a=0,d=this.length;a<d;a++)if(this[a]===e)return a;return-1};n=/^\s*$/;k=/(\[\/?.+?\])/;h=/^\r?\n/;window.BBCodeParser=function(){function e(a){var d,b,e;a==null&&(a=null);this.tags={};if(a)for(b=0,e=a.length;b<e;b++)d=a[b],m.call(BBCODE_TAGS,d)>=0&&(this.tags[d]=BBCODE_TAGS[d]);else for(d in BBCODE_TAGS)a=BBCODE_TAGS[d],this.tags[d]=a;this.renderer=new BBCodeRenderer}e.prototype.register_tag=function(a,d){return this.tags[a]=d};
e.prototype._parse_params=function(a){var d,b,e,o,f,c,g,h,k;e=[];if(a){f=b=[];g=[];c=" ";o=!1;for(h=0,k=a.length;h<k;h++)d=a[h],o?o=!1:f===b&&d==="="?f=g:!g.length&&d==='"'?c=d:d!==c?f.push(d):(e.push([b.join("").toLowerCase(),g.join("")]),n.test(c)||(o=!0),f=b=[],g=[],c=" ");e.push([b.join("").toLowerCase(),g.join("")])}return e};e.prototype._create_text_node=function(a,d){a.children.length&&a.children.slice(-1)[0].STRIP_OUTER&&(d=d.replace(h,""));return new BBCodeTag(this.renderer,{text:d,parent:a})};
e.prototype.parse=function(a){var d,b,e,h,f,c;b=h=new BBCodeTag(this.renderer);for(c=a.split(k);c.length;)if(f=c.shift(),f.match(k))if(e=this._parse_params(f.slice(1,-1)),a=e[0][0],m.call(b.CLOSED_BY,a)>=0&&(c.unshift(f),a="/"+b.name,e=[]),a[0]==="/")if(a=a.slice(1),a in this.tags){if(b.name===a)b=b.parent}else this._create_text_node(b,f);else if(d=this.tags[a]){if(d=new d(this.renderer,{name:a,parent:b,params:e}),!d.SELF_CLOSE&&(m.call(d.CLOSED_BY,a)<0||b.name!==a))b=d}else this._create_text_node(b,
f);else this._create_text_node(b,f);return h};e.prototype.to_html=function(a){return this.parse(a).to_html()};return e}()}).call(this);
(function(){var n,i,k,m,e,a,b=Array.prototype.slice;e=/[&<>"]/g;m={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};a=/\b((?:([\w-]+):(\/{1,3})|www[.])(?:(?:(?:[^\s&()]|&amp;|&quot;)*(?:[^!"#$%&'()*+,.:;<=>?@\[\]^`{|}~\s]))|(?:\((?:[^\s&()]|&amp;|&quot;)*\)))+)/g;i={"--":"&ndash;","---":"&mdash;","...":"&#8230;","(c)":"&copy;","(reg)":"&reg;","(tm)":"&trade;"};k=RegExp(function(){var a;a=[];for(n in i)a.push(n.replace(/(\.|\)|\()/g,"\\$1"));return a}().join("|"));window.BBCodeRenderer=function(){function c(){this._contexts=
[];this.options={linkify:!0}}c.prototype.context=function(a,c){var b,d,h,e;d={};e=this.options;for(b in e)h=e[b],d[b]=h;for(b in a)h=a[b],d[b]=h;this._contexts.push(this.options);this.options=d;h=c();this.options=this._contexts.pop();return h};c.prototype.escape=function(a){return a.replace(e,function(a){return m[a]})};c.prototype.linkify=function(c){return c.replace(a,function(){var a,c,d;a=1<=arguments.length?b.call(arguments,0):[];d=a[1];if((c=a[2])&&c!=="http"&&c!=="https")return d;a=a[1];c||
(a="http://"+a);return'<a href="'+a+'" target="_blank">'+d+"</a>"})};c.prototype.strip=function(a){return a.replace(/^\s+|\s+$/g,"")};c.prototype.cosmetic_replace=function(a){return a.replace(k,function(){var a;a=(1<=arguments.length?b.call(arguments,0):[])[0];return i[a]||a})};c.prototype.html_attributes=function(a){var c,b;return!a?"":function(){var d;d=[];for(c in a)b=a[c],d.push(""+c+'="'+b+'"');return d}().join(" ")};return c}()}).call(this);
(function(){var n,i,k,m,e,a,b,c,p,o,g,d,h,q=Array.prototype.indexOf||function(a){for(var j=0,c=this.length;j<c;j++)if(this[j]===a)return j;return-1},r=Object.prototype.hasOwnProperty,l=function(a,j){function c(){this.constructor=a}for(var b in j)r.call(j,b)&&(a[b]=j[b]);c.prototype=j.prototype;a.prototype=new c;a.__super__=j.prototype;return a},s=function(a,j){return function(){return a.apply(j,arguments)}};h=/\r?\n/g;window.BBCodeTag=function(){function a(j,f){var c,b,d,e,g,h;this.renderer=j;f==
null&&(f={});this.CLOSED_BY=[];this.DISCARD_TEXT=this.STRIP_OUTER=this.STRIP_INNER=this.SELF_CLOSE=!1;this.name=f.name||null;this.parent=f.parent||null;this.text=f.text||"";this.parent&&this.parent.children.push(this);f.params==null&&(f.params=[]);this.params={};g=f.params;for(d=0,e=g.length;d<e;d++)h=g[d],c=h[0],b=h[1],b&&(this.params[c]=b);this.children=[]}a.prototype.get_content=function(a){var f,c,b,d,e;a==null&&(a=!1);b=[];this.text&&(f=this.renderer.escape(this.text),a||(this.renderer.options.linkify&&
(f=this.renderer.linkify(f)),f=this.renderer.cosmetic_replace(f.replace(h,"<br />"))),b.push(f));c=this.children;for(d=0,e=c.length;d<e;d++)f=c[d],a?b.push(f.to_text()):this.DISCARD_TEXT&&f.name===null||b.push(f.to_html());b=b.join("");if(!a&&this.STRIP_INNER){for(b=this.renderer.strip(b);b.slice(0,6)==="<br />";)b=b.slice(6);for(;b.slice(-6)==="<br />";)b=b.slice(0,-6);b=this.renderer.strip(b)}return b};a.prototype.to_text=function(a){var f,b,c,d,e;a==null&&(a=!1);c=[];this.name!==null&&(this.params.length?
(b=function(){var a,b;a=this.params;b=[];for(f in a)d=a[f],b.push([f,d].join("="));return b}.call(this).join(" "),this.name in this.params?c.push("["+b+"]"):c.push("["+this.name+" "+b+"]")):c.push("["+this.name+"]"));c.push(this.get_content(!a));this.name!==null&&(e=this.name,q.call(this.CLOSED_BY,e)<0)&&c.push("[/"+this.name+"]");return c.join("")};a.prototype._to_html=function(){return[this.to_text(!0)]};a.prototype.to_html=function(){return this._to_html().join("")};return a}();i=function(){function a(){a.__super__.constructor.apply(this,
arguments);this.STRIP_INNER=!0;this._inline=this.params.code==="inline";if(!this._inline)this.STRIP_OUTER=!0}l(a,BBCodeTag);a.prototype._to_html=function(){var a;return this._inline?["<code>",this.get_content(!0),"</code>"]:(a=this.params.lang||this.params[this.name])?['<pre class="prettyprint lang-'+a+'">',this.get_content(!0),"</pre>"]:["<pre>",this.get_content(!0),"</pre>"]};return a}();e=function(){function a(){a.__super__.constructor.apply(this,arguments)}l(a,BBCodeTag);a.prototype._to_html=
function(){var a;a={src:this.renderer.strip(this.get_content(!0))};"width"in this.params&&(a.width=this.params.width);"height"in this.params&&(a.height=this.params.height);return["<img "+this.renderer.html_attributes(a)+" />"]};return a}();g=function(){function a(){a.__super__.constructor.apply(this,arguments)}l(a,BBCodeTag);a.prototype._to_html=function(){var a;a=this.params.size;return isNaN(a)?this.get_content():['<span style="font-size:'+a+'px">',this.get_content(),"</span>"]};return a}();k=function(){function a(){a.__super__.constructor.apply(this,
arguments)}l(a,BBCodeTag);a.prototype._to_html=function(){var a;a=this.params.color;return!a?this.get_content():['<span style="color:'+a+'">',this.get_content(),"</span>"]};return a}();n=function(){function a(){a.__super__.constructor.apply(this,arguments)}l(a,BBCodeTag);a.prototype._to_html=function(){return['<div style="text-align:center;">',this.get_content(),"</div>"]};return a}();o=function(){function a(){a.__super__.constructor.apply(this,arguments)}l(a,BBCodeTag);a.prototype._to_html=function(){return['<div style="float:right;">',
this.get_content(),"</div>"]};return a}();m=function(){function a(){a.__super__.constructor.apply(this,arguments);this.STRIP_OUTER=this.SELF_CLOSE=!0}l(a,BBCodeTag);a.prototype._to_html=function(){return["<hr />"]};return a}();b=function(){function a(){a.__super__.constructor.apply(this,arguments);this.STRIP_OUTER=this.STRIP_INNER=!0}l(a,BBCodeTag);a.prototype._to_html=function(){var a;a=this.params.list;return a==="1"?["<ol>",this.get_content(),"</ol>"]:a==="a"?['<ol style="list-style-type:lower-alpha;">',
this.get_content(),"</ol>"]:a==="A"?['<ol style="list-style-type:upper-alpha;">',this.get_content(),"</ol>"]:["<ul>",this.get_content(),"</ul>"]};return a}();c=function(){function a(){a.__super__.constructor.apply(this,arguments);this.CLOSED_BY=["*","/list"];this.STRIP_INNER=!0}l(a,BBCodeTag);a.prototype._to_html=function(){return["<li>",this.get_content(),"</li>"]};return a}();p=function(){function a(){a.__super__.constructor.apply(this,arguments);this.STRIP_OUTER=this.STRIP_INNER=!0}l(a,BBCodeTag);
a.prototype._to_html=function(){var a,b;b=["<blockquote>",this.get_content()];if(a=this.params.quote)b.push("<small>"),b.push(a),b.push("</small>");b.push("</blockquote>");return b};return a}();a=function(){function a(){a.__super__.constructor.apply(this,arguments)}l(a,BBCodeTag);a.prototype._to_html=function(){var a;a=this.renderer.strip(this.params[this.name]||this.get_content(!0));/javascript:/i.test(a)?a="":/:/.test(a)||(a="http://"+a);return a?this.renderer.context({linkify:!1},s(function(){return['<a href="'+
a+'" target="_blank">',this.get_content(),"</a>"]},this)):[this.get_content()]};return a}();d=function(a,b){return function(){function c(){var a,d;c.__super__.constructor.apply(this,arguments);for(a in b)d=b[a],this[a]=d}l(c,BBCodeTag);c.prototype._to_html=function(){var b;(b=this.renderer.html_attributes(this.params))&&(b=" "+b);return["<"+a+b+">",this.get_content(),"</"+a+">"]};return c}()};window.BBCODE_TAGS={b:d("strong"),i:d("em"),u:d("u"),s:d("strike"),h1:d("h1",{STRIP_OUTER:!0}),h2:d("h2",
{STRIP_OUTER:!0}),h3:d("h3",{STRIP_OUTER:!0}),h4:d("h4",{STRIP_OUTER:!0}),h5:d("h5",{STRIP_OUTER:!0}),h6:d("h6",{STRIP_OUTER:!0}),pre:d("pre"),table:d("table",{DISCARD_TEXT:!0}),thead:d("thead",{DISCARD_TEXT:!0}),tbody:d("tbody",{DISCARD_TEXT:!0}),tr:d("tr",{DISCARD_TEXT:!0}),th:d("th"),td:d("td"),code:i,img:e,hr:m,size:g,center:n,right:o,color:k,list:b,"*":c,quote:p,url:a,link:a}}).call(this);
(function(){var n,i,k,m=Array.prototype.indexOf||function(e){for(var a=0,b=this.length;a<b;a++)if(this[a]===e)return a;return-1};n=/^\s*$/;k=/(\[\/?.+?\])/;i=/^\r?\n/;window.BBCodeParser=function(){function e(a){var b,c,e;a==null&&(a=null);this.tags={};if(a)for(c=0,e=a.length;c<e;c++)b=a[c],m.call(BBCODE_TAGS,b)>=0&&this.register_tag(b,BBCODE_TAGS[b]);else for(b in BBCODE_TAGS)a=BBCODE_TAGS[b],this.register_tag(b,a);this.renderer=new BBCodeRenderer}e.prototype.register_tag=function(a,b){return this.tags[a]=
b};e.prototype._parse_params=function(a){var b,c,e,o,g,d,h,i,k;e=[];if(a){g=c=[];h=[];d=" ";o=!1;for(i=0,k=a.length;i<k;i++)b=a[i],o?o=!1:g===c&&b==="="?g=h:!h.length&&b==='"'?d=b:b!==d?g.push(b):(e.push([c.join("").toLowerCase(),h.join("")]),n.test(d)||(o=!0),g=c=[],h=[],d=" ");e.push([c.join("").toLowerCase(),h.join("")])}return e};e.prototype._create_text_node=function(a,b){var c;if((c=a.children.slice(-1)[0])!=null&&c.STRIP_OUTER)b=b.replace(i,"");return new BBCodeTag(this.renderer,{text:b,parent:a})};
e.prototype.parse=function(a){var b,c,e,i,g,d;c=i=new BBCodeTag(this.renderer);for(d=a.split(k);d.length;)if(g=d.shift(),g.match(k))if(e=this._parse_params(g.slice(1,-1)),a=e[0][0],m.call(c.CLOSED_BY,a)>=0&&(d.unshift(g),a="/"+c.name,e=[]),a[0]==="/")if(a=a.slice(1),a in this.tags){if(c.name===a)c=c.parent}else this._create_text_node(c,g);else if(b=this.tags[a]){if(b=new b(this.renderer,{name:a,parent:c,params:e}),!b.SELF_CLOSE&&(m.call(b.CLOSED_BY,a)<0||c.name!==a))c=b}else this._create_text_node(c,
g);else this._create_text_node(c,g);return i};e.prototype.to_html=function(a){return this.parse(a).to_html()};return e}()}).call(this);
(function(){var n,i,k,m,e,a,b=Array.prototype.slice;e=/[&<>"]/g;m={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};a=/\b((?:([\w-]+):(\/{1,3})|www[.])(?:(?:(?:[^\s&()]|&amp;|&quot;)*(?:[^!"#$%&'()*+,.:;<=>?@\[\]^`{|}~\s]))|(?:\((?:[^\s&()]|&amp;|&quot;)*\)))+)/g;i={"--":"&ndash;","---":"&mdash;","...":"&#8230;","(c)":"&copy;","(reg)":"&reg;","(tm)":"&trade;"};k=RegExp(function(){var a;a=[];for(n in i)a.push(n.replace(/(\.|\)|\()/g,"\\$1"));return a}().join("|"));window.BBCodeRenderer=function(){function c(){this._contexts=
[];this.options={linkify:!0}}c.prototype.context=function(a,c){var b,d,h,e;d={};e=this.options;for(b in e)h=e[b],d[b]=h;for(b in a)h=a[b],d[b]=h;this._contexts.push(this.options);this.options=d;h=c();this.options=this._contexts.pop();return h};c.prototype.escape=function(a){return a.replace(e,function(a){return m[a]})};c.prototype.linkify=function(c){return c.replace(a,function(){var a,c,d;a=1<=arguments.length?b.call(arguments,0):[];d=a[1];if((c=a[2])&&c!=="http"&&c!=="https")return d;a=a[1];c||
(a="http://"+a);return'<a href="'+a+'" target="_blank">'+d+"</a>"})};c.prototype.strip=function(a){return a.replace(/^\s+|\s+$/g,"")};c.prototype.cosmeticReplace=function(a){return a.replace(k,function(){var a;a=(1<=arguments.length?b.call(arguments,0):[])[0];return i[a]||a})};c.prototype.htmlAttributes=function(a){var c,b;return!a?"":function(){var d;d=[];for(c in a)b=a[c],d.push(""+c+'="'+b+'"');return d}().join(" ")};return c}()}).call(this);
(function(){var n,i,k,m,e,a,b,c,p,o,g,d,h,q=Array.prototype.indexOf||function(a){for(var j=0,c=this.length;j<c;j++)if(this[j]===a)return j;return-1},r=Object.prototype.hasOwnProperty,l=function(a,j){function c(){this.constructor=a}for(var b in j)r.call(j,b)&&(a[b]=j[b]);c.prototype=j.prototype;a.prototype=new c;a.__super__=j.prototype;return a},s=function(a,j){return function(){return a.apply(j,arguments)}};h=/\r?\n/g;window.BBCodeTag=function(){function a(j,f){var c,b,d,e,g,h;this.renderer=j;f==
null&&(f={});this.CLOSED_BY=[];this.DISCARD_TEXT=this.STRIP_OUTER=this.STRIP_INNER=this.SELF_CLOSE=!1;this.name=f.name||null;this.parent=f.parent||null;this.text=f.text||"";this.parent&&this.parent.children.push(this);f.params==null&&(f.params=[]);this.params={};g=f.params;for(d=0,e=g.length;d<e;d++)h=g[d],c=h[0],b=h[1],b&&(this.params[c]=b);this.children=[]}a.prototype.getContent=function(a){var f,c,b,d,e;a==null&&(a=!1);b=[];this.text&&(f=this.renderer.escape(this.text),a||(this.renderer.options.linkify&&
(f=this.renderer.linkify(f)),f=this.renderer.cosmeticReplace(f.replace(h,"<br />"))),b.push(f));c=this.children;for(d=0,e=c.length;d<e;d++)f=c[d],a?b.push(f.toText()):this.DISCARD_TEXT&&f.name===null||b.push(f.toHTML());b=b.join("");if(!a&&this.STRIP_INNER){for(b=this.renderer.strip(b);b.slice(0,6)==="<br />";)b=b.slice(6);for(;b.slice(-6)==="<br />";)b=b.slice(0,-6);b=this.renderer.strip(b)}return b};a.prototype.toText=function(a){var f,b,c,d,e;a==null&&(a=!1);c=[];this.name!==null&&(this.params.length?
(b=function(){var a,b;a=this.params;b=[];for(f in a)d=a[f],b.push([f,d].join("="));return b}.call(this).join(" "),this.name in this.params?c.push("["+b+"]"):c.push("["+this.name+" "+b+"]")):c.push("["+this.name+"]"));c.push(this.getContent(!a));this.name!==null&&(e=this.name,q.call(this.CLOSED_BY,e)<0)&&c.push("[/"+this.name+"]");return c.join("")};a.prototype._toHTML=function(){return[this.toText(!0)]};a.prototype.toHTML=function(){return this._toHTML().join("")};return a}();i=function(){function a(){a.__super__.constructor.apply(this,
arguments);this.STRIP_INNER=!0;this._inline=this.params.code==="inline";if(!this._inline)this.STRIP_OUTER=!0}l(a,BBCodeTag);a.prototype._toHTML=function(){var a;return this._inline?["<code>",this.getContent(!0),"</code>"]:(a=this.params.lang||this.params[this.name])?['<pre class="prettyprint lang-'+a+'">',this.getContent(!0),"</pre>"]:["<pre>",this.getContent(!0),"</pre>"]};return a}();e=function(){function a(){a.__super__.constructor.apply(this,arguments)}l(a,BBCodeTag);a.prototype._toHTML=function(){var a;
a={src:this.renderer.strip(this.getContent(!0))};"width"in this.params&&(a.width=this.params.width);"height"in this.params&&(a.height=this.params.height);return["<img "+this.renderer.htmlAttributes(a)+" />"]};return a}();g=function(){function a(){a.__super__.constructor.apply(this,arguments)}l(a,BBCodeTag);a.prototype._toHTML=function(){var a;a=this.params.size;return isNaN(a)?this.getContent():['<span style="font-size:'+a+'px">',this.getContent(),"</span>"]};return a}();k=function(){function a(){a.__super__.constructor.apply(this,
arguments)}l(a,BBCodeTag);a.prototype._toHTML=function(){var a;a=this.params.color;return!a?this.getContent():['<span style="color:'+a+'">',this.getContent(),"</span>"]};return a}();n=function(){function a(){a.__super__.constructor.apply(this,arguments)}l(a,BBCodeTag);a.prototype._toHTML=function(){return['<div style="text-align:center;">',this.getContent(),"</div>"]};return a}();o=function(){function a(){a.__super__.constructor.apply(this,arguments)}l(a,BBCodeTag);a.prototype._toHTML=function(){return['<div style="float:right;">',
this.getContent(),"</div>"]};return a}();m=function(){function a(){a.__super__.constructor.apply(this,arguments);this.STRIP_OUTER=this.SELF_CLOSE=!0}l(a,BBCodeTag);a.prototype._toHTML=function(){return["<hr />"]};return a}();b=function(){function a(){a.__super__.constructor.apply(this,arguments);this.STRIP_OUTER=this.STRIP_INNER=!0}l(a,BBCodeTag);a.prototype._toHTML=function(){var a;a=this.params.list;return a==="1"?["<ol>",this.getContent(),"</ol>"]:a==="a"?['<ol style="list-style-type:lower-alpha;">',
this.getContent(),"</ol>"]:a==="A"?['<ol style="list-style-type:upper-alpha;">',this.getContent(),"</ol>"]:["<ul>",this.getContent(),"</ul>"]};return a}();c=function(){function a(){a.__super__.constructor.apply(this,arguments);this.CLOSED_BY=["*","/list"];this.STRIP_INNER=!0}l(a,BBCodeTag);a.prototype._toHTML=function(){return["<li>",this.getContent(),"</li>"]};return a}();p=function(){function a(){a.__super__.constructor.apply(this,arguments);this.STRIP_OUTER=this.STRIP_INNER=!0}l(a,BBCodeTag);a.prototype._toHTML=
function(){var a,b;b=["<blockquote>",this.getContent()];if(a=this.params.quote)b.push("<small>"),b.push(a),b.push("</small>");b.push("</blockquote>");return b};return a}();a=function(){function a(){a.__super__.constructor.apply(this,arguments)}l(a,BBCodeTag);a.prototype._toHTML=function(){var a;a=this.renderer.strip(this.params[this.name]||this.getContent(!0));/javascript:/i.test(a)?a="":/:/.test(a)||(a="http://"+a);return a?this.renderer.context({linkify:!1},s(function(){return['<a href="'+a+'" target="_blank">',
this.getContent(),"</a>"]},this)):[this.getContent()]};return a}();d=function(a,b){return function(){function c(){var a,d;c.__super__.constructor.apply(this,arguments);for(a in b)d=b[a],this[a]=d}l(c,BBCodeTag);c.prototype._toHTML=function(){var b;(b=this.renderer.htmlAttributes(this.params))&&(b=" "+b);return["<"+a+b+">",this.getContent(),"</"+a+">"]};return c}()};window.BBCODE_TAGS={b:d("strong"),i:d("em"),u:d("u"),s:d("strike"),h1:d("h1",{STRIP_OUTER:!0}),h2:d("h2",{STRIP_OUTER:!0}),h3:d("h3",
{STRIP_OUTER:!0}),h4:d("h4",{STRIP_OUTER:!0}),h5:d("h5",{STRIP_OUTER:!0}),h6:d("h6",{STRIP_OUTER:!0}),pre:d("pre"),table:d("table",{DISCARD_TEXT:!0}),thead:d("thead",{DISCARD_TEXT:!0}),tbody:d("tbody",{DISCARD_TEXT:!0}),tr:d("tr",{DISCARD_TEXT:!0}),th:d("th"),td:d("td"),code:i,img:e,hr:m,size:g,center:n,right:o,color:k,list:b,"*":c,quote:p,url:a,link:a}}).call(this);
(function(){var n,i,k,m=Array.prototype.indexOf||function(e){for(var a=0,b=this.length;a<b;a++)if(this[a]===e)return a;return-1};n=/^\s*$/;k=/(\[\/?.+?\])/;i=/^\r?\n/;window.BBCodeParser=function(){function e(a){var b,c,e;a==null&&(a=null);this.tags={};if(a)for(c=0,e=a.length;c<e;c++)b=a[c],m.call(BBCODE_TAGS,b)>=0&&this.registerTag(b,BBCODE_TAGS[b]);else for(b in BBCODE_TAGS)a=BBCODE_TAGS[b],this.registerTag(b,a);this.renderer=new BBCodeRenderer}e.prototype.registerTag=function(a,b){return this.tags[a]=
b};e.prototype._parseParams=function(a){var b,c,e,o,g,d,h,i,k;e=[];if(a){g=c=[];h=[];d=" ";o=!1;for(i=0,k=a.length;i<k;i++)b=a[i],o?o=!1:g===c&&b==="="?g=h:!h.length&&b==='"'?d=b:b!==d?g.push(b):(e.push([c.join("").toLowerCase(),h.join("")]),n.test(d)||(o=!0),g=c=[],h=[],d=" ");e.push([c.join("").toLowerCase(),h.join("")])}return e};e.prototype._createTextNode=function(a,b){var c;if((c=a.children.slice(-1)[0])!=null&&c.STRIP_OUTER)b=b.replace(i,"");return new BBCodeTag(this.renderer,{text:b,parent:a})};
e.prototype.parse=function(a){var b,c,e,i,g,d;c=i=new BBCodeTag(this.renderer);for(d=a.split(k);d.length;)if(g=d.shift(),g.match(k))if(e=this._parseParams(g.slice(1,-1)),a=e[0][0],m.call(c.CLOSED_BY,a)>=0&&(d.unshift(g),a="/"+c.name,e=[]),a[0]==="/")if(a=a.slice(1),a in this.tags){if(c.name===a)c=c.parent}else this._createTextNode(c,g);else if(b=this.tags[a]){if(b=new b(this.renderer,{name:a,parent:c,params:e}),!b.SELF_CLOSE&&(m.call(b.CLOSED_BY,a)<0||c.name!==a))c=b}else this._createTextNode(c,g);
else this._createTextNode(c,g);return i};e.prototype.toHTML=function(a){return this.parse(a).toHTML()};return e}()}).call(this);
